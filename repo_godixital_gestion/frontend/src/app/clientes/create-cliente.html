<div class="page-wrapper">

    <!-- HEADER -->

    <page-header>
    </page-header>

    <!-- FINAL DE HEADER -->

    <!-- DIVISOR -->

    <div class="clearfix"> </div>

    <!-- FINAL DE DIVISOR -->



    <div class="page-container">

        <!-- SIDEBAR -->

        <page-sidebar>
        </page-sidebar>

        <!-- FINAL SIDEBAR -->

        <!-- CONTENIDO -->

        <div class="page-content-wrapper">

            <div class="page-content">

                <div class="row">
                    <div class="col-md-12">
                        <!-- Begin: Demo Datatable 1 -->
                        <div class="portlet light portlet-fit portlet-datatable bordered">
                            <div class="portlet-title">
                                <div class="caption">
                                    <ol class="breadcrumb" style="background-color:transparent;">
                                        <li class="caption-subject font-dark sbold uppercase"><a [routerLink]="['/clientes']"><i class="fa fa-briefcase" aria-hidden="true"></i> Clientes</a></li>
                                        <li class="caption-subject font-dark sbold uppercase">Nuevo cliente</li>
                                    </ol>
                                </div>
                                <div *ngIf="formCliente" class="actions">
                                  <button (click)="createCliente()" [disabled]="loader || formCliente.invalid" class="btn blue sbold">
                                      <i class="fa fa-users" aria-hidden="true"></i> Generar cliente
                                      <img *ngIf="loader" src="assets/img/loader.gif" class="gif-loader">
                                  </button>
                                </div>
                            </div>
                            <div class="portlet-body">
                                <div class="row">
                                    <div *ngIf="formCliente && formCliente.invalid" class="alert alert-info alert-dismissable">
                                      <ul>
                                        <li>El botón <strong>Generar cliente</strong> se habilitará cuando estén completos todos los campos requeridos.</li>
                                      </ul>
                                    </div>
                                    <div *ngIf="formCliente && formCliente.invalid && isSubmitCliente" class="alert alert-danger alert-dismissable">
                                        <strong>Alerta!</strong> Faltan datos por completar.
                                    </div>
                                    <form novalidate [formGroup]="formCliente" id="formCliente">
                                        <div class="col-md-6">
                                            <div class="form-group" [ngClass]="{ 'has-error': formCliente.controls.nombre.errors && formCliente.controls.nombre.pristine && isSubmitCliente }">
                                                <label for="nombre">Nombre del cliente <strong class="text-danger">*</strong></label>
                                                <input type="text" class="form-control" name="nombre" formControlName="nombre" id="nombre" maxlength="50">

                                                <div *ngIf="formCliente.controls.nombre.errors && formCliente.controls.nombre.pristine && isSubmitCliente">
                                                    <strong class="help-block" *ngIf="formCliente.controls.nombre.errors.required">El nombre del cliente es requerido</strong>
                                                    <strong class="help-block" *ngIf="formCliente.controls.nombre.errors.maxlength">El nombre del cliente debe contener menos de 50 caracteres</strong>
                                                    <strong class="help-block" *ngIf="formCliente.controls.nombre.errors.sinEspacios">El nombre del cliente no debe contener espacios en blaco al inicio del texto</strong>
                                                </div>
                                            </div>

                                            <br>
                                            <br>

                                            <div class="form-group" [ngClass]="{ 'has-error': formCliente.controls.pm_asignado.errors && formCliente.controls.pm_asignado.pristine && isSubmitCliente }">
                                                <label for="pm_asignado">Project manager asignado <strong class="text-danger">*</strong></label>
                                                <select class="form-control" name="pm_asignado" id="pm_asignado" formControlName="pm_asignado">
                                                    <option value="">Ninguno...</option>
                                                    <option *ngFor="let pm of listPms" value="{{pm.id}}">{{pm.nombres}} {{pm.apellidos}}</option>
                                                </select>
                                                <div *ngIf="formCliente.controls.pm_asignado.errors && formCliente.controls.pm_asignado.pristine && isSubmitCliente">
                                                    <strong class="help-block" *ngIf="formCliente.controls.pm_asignado.errors.required">El project manager es requerido</strong>
                                                </div>
                                            </div>

                                            <br>
                                            <br>

                                            <div *ngIf="!esPrincipal" class="alert alert-danger">
                                              <strong>Debe asignar al menos un contacto principal</strong>
                                            </div>
                                            <div class="portlet box blue">
                                                <div class="portlet-title">
                                                    <div class="caption">
                                                        Contactos <strong class="text-danger">*</strong>
                                                    </div>
                                                    <div class="actions">
                                                        <button (click)="showModalCreateContacto()" class="btn blue sbold" type="button" name="button" style="border:1px solid #fff"><i class="fa fa-plus" aria-hidden="true"></i></button>
                                                    </div>
                                                </div>
                                                <div class="portlet-body">
                                                    <div class="table-responsive">
                                                      <table class="table table-striped table-bordered table-hover">
                                                        <thead>
                                                          <tr>
                                                            <th>Nombre</th>
                                                            <th>Apellido</th>
                                                            <th>Religión judía</th>
                                                            <th>¿Por qué medio es mejor contactarlo?</th>
                                                            <th>Comentarios</th>
                                                            <th>¿Es el contacto principal?</th>
                                                            <th>Acciones</th>
                                                          </tr>
                                                        </thead>
                                                        <tbody>
                                                          <tr *ngFor="let contacto of modelContacto; let i=index">
                                                            <td>{{ contacto.nombre }}</td>
                                                            <td>{{ contacto.apellido }}</td>
                                                            <td>
                                                              <span *ngIf="contacto.religion_judia == 0" class="label label-sm label-danger"><strong>No</strong></span>
                                                              <span *ngIf="contacto.religion_judia == 1" class="label label-sm label-success"><strong>Si</strong></span>
                                                            </td>
                                                            <td>{{ contacto.medio_contacto }}</td>
                                                            <td>{{ contacto.comentario_contacto }}</td>
                                                            <td>
                                                              <span *ngIf="contacto.es_principal == 0" class="label label-sm label-danger"><strong>No</strong></span>
                                                              <span *ngIf="contacto.es_principal == 1" class="label label-sm label-success"><strong>Si</strong></span>
                                                            </td>
                                                            <td width="20%">
                                                              <button (click)="showModalEditContacto(i)" class="btn yellow sbold btn-sm" type="button" name="button">
                                                                  <i class="fa fa-pencil"></i>
                                                              </button>
                                                              <button data-toggle="modal" data-target="#eliminar-contacto" (click)="onDeleteContacto(contacto, i)" class="btn btn-danger sbold btn-sm" type="button" name="button">
                                                                  <i class="fa fa-trash" aria-hidden="true"></i>
                                                              </button>
                                                            </td>
                                                          </tr>
                                                        </tbody>
                                                      </table>
                                                    </div>
                                                </div>
                                            </div>

                                            <br>
                                            <br>

                                            <div class="form-group" [ngClass]="{ 'has-error': formCliente.controls.fecha_comienzo.errors && formCliente.controls.fecha_comienzo.pristine && isSubmitCliente }">
                                                <label for="fecha_comienzo">Fecha de comienzo de gestión <strong class="text-danger uppercaster">*</strong></label>
                                                <my-date-picker name="fecha_comienzo" [options]="myDatePickerOptions" formControlName="fecha_comienzo"></my-date-picker>

                                                <div *ngIf="formCliente.controls.fecha_comienzo.errors && formCliente.controls.fecha_comienzo.pristine && isSubmitCliente">
                                                    <strong class="help-block" *ngIf="formCliente.controls.fecha_comienzo.errors.required">La fecha de comienzo de gestión es requerida</strong>
                                                </div>
                                            </div>

                                        </div>

                                        <div class="col-md-6">

                                          <div class="portlet box green">
                                              <div class="portlet-title">
                                                  <div class="caption">
                                                      Servicios <strong class="text-danger">*</strong>
                                                  </div>
                                                  <div class="actions">
                                                      <button (click)="showModalCreateServicio()" class="btn green sbold" type="button" name="button" style="border:1px solid #fff"><i class="fa fa-plus" aria-hidden="true"></i></button>
                                                  </div>
                                              </div>
                                              <div class="portlet-body">
                                                  <div class="table-responsive">
                                                    <table class="table table-striped table-bordered table-hover">
                                                      <thead>
                                                        <tr>
                                                          <th>Servicio</th>
                                                          <th>Cantidad mensual</th>
                                                          <th>Acciones</th>
                                                        </tr>
                                                      </thead>
                                                      <tbody>
                                                        <tr *ngFor="let servicioContratado of modelServicioContratado; let i=index">
                                                          <td>
                                                            <span class="label label-sm label-success"><strong>{{ servicioContratado.nombre_servicio }}</strong></span>
                                                          </td>
                                                          <td>{{ servicioContratado.cantidad_mensual }}</td>
                                                          <td width="20%">
                                                            <button (click)="showModalEditServicio(i)" class="btn yellow sbold btn-sm" type="button" name="button">
                                                                <i class="fa fa-pencil"></i>
                                                            </button>
                                                            <button data-toggle="modal" data-target="#eliminar-servicio" (click)="onDeleteServicio(servicioContratado, i)" class="btn btn-danger sbold btn-sm" type="button" name="button">
                                                                <i class="fa fa-trash" aria-hidden="true"></i>
                                                            </button>
                                                          </td>
                                                        </tr>
                                                      </tbody>
                                                    </table>
                                                  </div>
                                              </div>
                                          </div>

                                          <br>
                                          <br>

                                          <div class="form-group" [ngClass]="{ 'has-error': formCliente.controls.monto_abono.errors && formCliente.controls.monto_abono.pristine && isSubmitCliente }">
                                              <label for="monto_abono">Monto del abono <strong>($)</strong> <strong class="text-danger">*</strong></label>
                                              <input type="text" [textMask]="{mask: numberMask}" class="form-control" name="monto_abono" id="monto_abono" formControlName="monto_abono">

                                              <div *ngIf="formCliente.controls.monto_abono.errors && formCliente.controls.monto_abono.pristine && isSubmitCliente">
                                                  <strong class="help-block" *ngIf="formCliente.controls.monto_abono.errors.required">El monto del abono es requerido</strong>
                                              </div>
                                          </div>

                                          <br>
                                          <br>

                                          <div class="form-group" [ngClass]="{ 'has-error': formCliente.controls.presupuesto_invertir_publicidad.errors && formCliente.controls.presupuesto_invertir_publicidad.pristine && isSubmitCliente }">
                                              <label for="presupuesto_invertir_publicidad">Presupuesto mensual a invertir en publicidad <strong>($)</strong> <strong class="text-danger">*</strong></label>
                                              <input type="text" [textMask]="{mask: numberMask}" class="form-control" name="presupuesto_invertir_publicidad" formControlName="presupuesto_invertir_publicidad" id="presupuesto_invertir_publicidad">

                                              <div *ngIf="formCliente.controls.presupuesto_invertir_publicidad.errors && formCliente.controls.presupuesto_invertir_publicidad.pristine && isSubmitCliente">
                                                  <strong class="help-block" *ngIf="formCliente.controls.presupuesto_invertir_publicidad.errors.required">El Presupuesto mensual a invertir en publicidad es requerido</strong>
                                              </div>
                                          </div>

                                          <br>
                                          <br>

                                          <div class="form-group" [ngClass]="{ 'has-error': formCliente.controls.id_metodo_facturacion.errors && formCliente.controls.id_metodo_facturacion.pristine && isSubmitCliente }">
                                              <label for="id_metodo_facturacion">Método de facturación <strong class="text-danger">*</strong></label>
                                              <select class="form-control" name="id_metodo_facturacion" formControlName="id_metodo_facturacion" id="id_metodo_facturacion">
                                                  <option value="">Ninguno...</option>
                                                  <option *ngFor="let id_metodo_facturacion of listMetodosFacturacion" value="{{id_metodo_facturacion.id}}">{{id_metodo_facturacion.nombre}}</option>
                                              </select>

                                              <div *ngIf="formCliente.controls.id_metodo_facturacion.errors && formCliente.controls.id_metodo_facturacion.pristine && isSubmitCliente">
                                                  <strong class="help-block" *ngIf="formCliente.controls.id_metodo_facturacion.errors.required">El método de facturación es requerido es requerido</strong>
                                              </div>
                                          </div>

                                        </div>

                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

        </div>

        <!-- FINAL DEL CONTENIDO -->

    </div>

    <!-- FOOTER -->

    <page-footer>
    </page-footer>

    <!-- FINAL DE FOOTER -->

</div>

<div class="quick-nav-overlay"></div>

<!-- MODAL NUEVO CONTACTO -->
<div bsModal #modalCreateContacto="bs-modal" id="nuevo-contacto" class="modal fade" tabindex="-1" role="basic" aria-hidden="true" [config]="{backdrop: 'static', keyboard: false}">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">

            <form class="form-horizontal" novalidate [formGroup]="formCreateContacto" id="fmrCreateContacto">

                <div class="modal-header">

                    <h4 class="modal-title pull-left">Nuevo contacto</h4>

                    <div class="pull-right">
                      <button type="button" class="btn dark btn-outline" data-dismiss="modal" (click)="hideModalCreateContacto()">Cerrar</button>
                      <button (click)="createContacto()" class="btn blue sbold">
                          Guardar contacto
                      </button>
                    </div>

                </div>

                <div class="modal-body">

                  <div class="form-group" [ngClass]="{ 'has-error': formCreateContacto.controls.nombre_contacto.errors && formCreateContacto.controls.nombre_contacto.pristine && isSubmitContacto }">
                      <label for="nombre_contacto" class="control-label col-md-3">
                          Nombre <strong class="text-danger">*</strong>
                      </label>
                      <div class="col-md-8">
                          <input type="text" name="nombre_contacto" id="nombre_contacto" formControlName="nombre_contacto" class="form-control">
                      </div>
                      <div class="col-md-offset-3 col-md-8" *ngIf="formCreateContacto.controls.nombre_contacto.errors && formCreateContacto.controls.nombre_contacto.pristine && isSubmitContacto">
                          <strong class="help-block" *ngIf="formCreateContacto.controls.nombre_contacto.errors.required">El nombre del contacto es requerido</strong>
                          <strong class="help-block" *ngIf="formCreateContacto.controls.nombre_contacto.errors.maxlength">El nombre del contacto no debe poseer mas de 50 caracteres</strong>
                          <strong class="help-block" *ngIf="formCreateContacto.controls.nombre_contacto.errors.sinEspacios">El nombre del contacto no debe poseer espacios en blanco al inicio del texto</strong>
                      </div>
                  </div>

                  <div class="form-group">
                      <label for="apellido_contacto" class="control-label col-md-3">
                          Apellido
                      </label>
                      <div class="col-md-8">
                          <input type="text" name="apellido_contacto" id="apellido_contacto" formControlName="apellido_contacto" class="form-control">
                      </div>
                  </div>

                  <div class="form-group">
                      <label for="religion_judia" class="control-label col-md-3">
                          ¿Religión judía? <strong class="text-danger">*</strong>
                      </label>
                      <div class="col-md-8">
                          <select name="religion_judia" id="religion_judia" formControlName="religion_judia" class="form-control">
                            <option value="0">No</option>
                            <option value="1">Si</option>
                          </select>
                      </div>
                  </div>

                  <div class="form-group" [ngClass]="{ 'has-error': formCreateContacto.controls.medio_contacto.errors && formCreateContacto.controls.medio_contacto.pristine && isSubmitContacto }">
                      <label for="medio_contacto" class="control-label col-md-3">
                          ¿Por qué medio es mejor contactarlo? <strong class="text-danger">*</strong>
                      </label>
                      <div class="col-md-8">
                          <textarea name="medio_contacto" id="medio_contacto" formControlName="medio_contacto" class="form-control" rows="4"></textarea>
                      </div>

                      <div class="col-md-offset-3 col-md-8" *ngIf="formCreateContacto.controls.medio_contacto.errors && formCreateContacto.controls.medio_contacto.pristine && isSubmitContacto">
                          <strong class="help-block" *ngIf="formCreateContacto.controls.medio_contacto.errors.required">Los comentarios son requeridos</strong>
                          <strong class="help-block" *ngIf="formCreateContacto.controls.medio_contacto.errors.sinEspacios">Los comentarios no deben poseer espacios en blanco al inicio del texto</strong>
                      </div>
                  </div>

                  <div class="form-group">
                      <label for="comentarios_contactos" class="control-label col-md-3">
                          Comentarios
                      </label>
                      <div class="col-md-8">
                          <textarea name="comentarios_contactos" id="comentarios_contactos" formControlName="comentarios_contactos" class="form-control" rows="4"></textarea>
                      </div>
                  </div>

                  <div class="form-group">
                      <label for="es_principal" class="control-label col-md-3">
                          ¿Es el contacto principal? <strong class="text-danger">*</strong>
                      </label>
                      <div class="col-md-8">
                          <select name="es_principal" id="es_principal" formControlName="es_principal" class="form-control">
                            <option value="0">No</option>
                            <option value="1">Si</option>
                          </select>
                      </div>
                  </div>

                  <hr>

                  <div class="portlet box blue">
                      <div class="portlet-title">
                        <div class="caption">
                            Roles <strong class="text-danger">*</strong>
                        </div>
                      </div>
                      <div class="portlet-body">

                        <form  novalidate [formGroup]="formCreateRolContacto" id="formCreateRolContacto">

                          <div class="form-group" [ngClass]="{ 'has-error': formCreateRolContacto.controls.rol_contacto.errors && formCreateRolContacto.controls.rol_contacto.pristine && isSubmitRolContacto }">
                              <div class="col-md-10">
                                  <select name="rol_contacto" id="rol_contacto" formControlName="rol_contacto" class="form-control" (change)="capturarRolContacto($event)">
                                    <option value="">Ninguno...</option>
                                    <option *ngFor="let rol of listRolesContacto" value="{{ rol.id }}">{{ rol.nombre }}</option>
                                  </select>
                              </div>
                              <div class="col-md-2">
                                <button (click)="addRolesModalCreateContacto()" class="btn blue sbold" type="button" name="button" style="border:1px solid #fff"><i class="fa fa-plus" aria-hidden="true"></i></button>
                              </div>
                              <div class="col-md-12" *ngIf="formCreateRolContacto.controls.rol_contacto.errors && formCreateRolContacto.controls.rol_contacto.pristine && isSubmitRolContacto">
                                  <strong class="help-block" *ngIf="formCreateRolContacto.controls.rol_contacto.errors.required">El rol del contacto es requerido</strong>
                              </div>
                          </div>

                        </form>

                        <div class="table-responsive">
                          <table class="table table-striped table-bordered table-hover" >
                            <thead>
                              <tr>
                                <th>Roles</th>
                                <th>Acciones</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr *ngFor="let rol of modelModalContacto?.roles; let i=index">
                                <td><span class="label label-sm label-success"><strong>{{ rol.nombre_rol }}</strong></span></td>
                                <td>
                                  <button (click)="deleteRolesModalCreateContacto(i)" class="btn btn-danger sbold btn-sm" type="button" name="button">
                                      <i class="fa fa-trash" aria-hidden="true"></i>
                                  </button>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>

                      </div>
                  </div>

                  <hr>

                  <div class="row">

                    <div class="col-md-6">

                      <div class="portlet box blue">
                          <div class="portlet-title">
                            <div class="caption">
                                Emails <strong class="text-danger">*</strong>
                            </div>
                          </div>
                          <div class="portlet-body">

                            <form novalidate [formGroup]="formCreateEmailContacto" id="formCreateEmailContacto">

                              <div class="form-group" [ngClass]="{ 'has-error': formCreateEmailContacto.controls.email_contacto.errors && formCreateEmailContacto.controls.email_contacto.pristine && isSubmitEmailContacto }">
                                  <div class="col-md-10">
                                    <input type="text" class="form-control" name="email_contacto" formControlName="email_contacto" id="email_contacto">
                                  </div>
                                  <div class="col-md-2">
                                    <button (click)="addEmailModalCreateContacto()" class="btn blue sbold" type="button" name="button" style="border:1px solid #fff"><i class="fa fa-plus" aria-hidden="true"></i></button>
                                  </div>
                                  <div class="col-md-12" *ngIf="formCreateEmailContacto.controls.email_contacto.errors && formCreateEmailContacto.controls.email_contacto.pristine && isSubmitEmailContacto">
                                      <strong class="help-block" *ngIf="formCreateEmailContacto.controls.email_contacto.errors.required">La descripción del email es requerida</strong>
                                      <strong class="help-block" *ngIf="formCreateEmailContacto.controls.email_contacto.errors.pattern">El formato de email es incorrecto. Ej: nombre@mail.com</strong>
                                  </div>
                              </div>

                            </form>

                            <div class="table-responsive">
                              <table class="table table-striped table-bordered table-hover" >
                                <thead>
                                  <tr>
                                    <th>Email</th>
                                    <th>Acciones</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr *ngFor="let email of modelModalContacto?.emails; let i=index">
                                    <td>{{ email.email }}</td>
                                    <td>
                                      <button (click)="deleteEmailModalCreateContacto(i)" class="btn btn-danger sbold btn-sm" type="button" name="button">
                                          <i class="fa fa-trash" aria-hidden="true"></i>
                                      </button>
                                    </td>
                                  </tr>
                                </tbody>
                              </table>
                            </div>

                          </div>
                      </div>

                  </div>

                  <div class="col-md-6">

                    <div class="portlet box blue">
                        <div class="portlet-title">
                          <div class="caption">
                              Teléfonos <strong class="text-danger">*</strong>
                          </div>
                        </div>
                        <div class="portlet-body">

                          <form novalidate [formGroup]="formCreateTelefonoContacto" id="formCreateTelefonoContacto">
                            <div class="form-group" [ngClass]="{ 'has-error': formCreateTelefonoContacto.controls.tipo_telefono.errors && formCreateTelefonoContacto.controls.tipo_telefono.pristine && isSubmitTelefonoContacto }">
                                <label for="tipo_telefono" class="control-label col-md-3">
                                  Tipo <strong class="text-danger">*</strong>
                                </label>
                                <div class="col-md-8">
                                  <select class="form-control" name="tipo_telefono" formControlName="tipo_telefono" formControlName="tipo_telefono" id="tipo_telefono" (change)="capturarTipoTelefono($event)">
                                    <option value="">Ninguno...</option>
                                    <option *ngFor="let tipo_telefono of listTiposTelefonos" value="{{ tipo_telefono.id }}">{{ tipo_telefono.nombre }}</option>
                                  </select>
                                </div>

                                <div class="col-md-offset-3 col-md-8" *ngIf="formCreateTelefonoContacto.controls.tipo_telefono.errors && formCreateTelefonoContacto.controls.tipo_telefono.pristine && isSubmitTelefonoContacto">
                                    <strong class="help-block" *ngIf="formCreateTelefonoContacto.controls.tipo_telefono.errors.required">El tipo de teléfono es requerido</strong>
                                </div>
                            </div>

                            <div class="form-group" [ngClass]="{ 'has-error': formCreateTelefonoContacto.controls.telefono_contacto.errors && formCreateTelefonoContacto.controls.telefono_contacto.pristine && isSubmitTelefonoContacto }">
                                <label for="telefono_contacto" class="control-label col-md-3">
                                  Número <strong class="text-danger">*</strong>
                                </label>
                                <div class="col-md-7">
                                  <input type="text" class="form-control" [textMask]="{mask: onlyNumberMask}" name="telefono_contacto" formControlName="telefono_contacto" formControlName="telefono_contacto" id="telefono_contacto">
                                </div>
                                <div class="col-md-2">
                                  <button (click)="addTelefonoModalCreateContacto()" class="btn blue sbold" type="button" name="button" style="border:1px solid #fff"><i class="fa fa-plus" aria-hidden="true"></i></button>
                                </div>
                                <div class="col-md-offset-3 col-md-8" *ngIf="formCreateTelefonoContacto.controls.telefono_contacto.errors && formCreateTelefonoContacto.controls.telefono_contacto.pristine && isSubmitTelefonoContacto">
                                    <strong class="help-block" *ngIf="formCreateTelefonoContacto.controls.telefono_contacto.errors.required">El teléfono es requerido</strong>
                                </div>
                            </div>
                          </form>

                          <table class="table table-striped table-bordered table-hover">
                            <thead>
                              <tr>
                                <th>Tipo teléfono</th>
                                <th>Teléfono</th>
                                <th>Acciones</th>
                              </tr>
                            </thead>

                            <tbody>
                              <tr *ngFor="let telefonos of modelModalContacto?.telefonos; let i=index">
                                <td>{{ telefonos.nombre_tipo_telefono }}</td>
                                <td>{{ telefonos.telefono }}</td>
                                <td>
                                  <button (click)="deleteTelefonoModalCreateContacto(i)" class="btn btn-danger sbold btn-sm" type="button" name="button">
                                      <i class="fa fa-trash" aria-hidden="true"></i>
                                  </button>
                                </td>
                              </tr>
                            </tbody>
                          </table>

                        </div>
                    </div>

                  </div>

                  </div>

                </div>

                <div class="modal-footer">
                    <button type="button" class="btn dark btn-outline" data-dismiss="modal" (click)="hideModalCreateContacto()">Cerrar</button>
                    <button (click)="createContacto()" class="btn blue sbold">
                        Guardar contacto
                    </button>
                </div>

            </form>

        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<!-- MODAL EDITAR CONTACTO -->
<div bsModal #modalEditContacto="bs-modal" id="editar-contacto" class="modal fade" tabindex="-1" role="basic" aria-hidden="true" [config]="{backdrop: 'static', keyboard: false}">
    <div class="modal-dialog modal-lg">
        <div *ngIf="formEditContacto && formEditEmailContacto && formEditTelefonoContacto" class="modal-content">

          <form class="form-horizontal" novalidate [formGroup]="formEditContacto" id="formEditContacto">

              <div class="modal-header">

                  <h4 class="modal-title pull-left">Editar contacto</h4>

                  <div class="pull-right">
                    <button type="button" class="btn dark btn-outline" data-dismiss="modal" (click)="hideModalEditContacto()">Cerrar</button>
                    <button (click)="editContacto()" class="btn blue sbold">
                        Editar contacto
                    </button>
                  </div>

              </div>

              <div class="modal-body">

                <div class="form-group" [ngClass]="{ 'has-error': formEditContacto.controls.nombre_contacto.errors && formEditContacto.controls.nombre_contacto.pristine && isSubmitContacto }">
                    <label for="nombre_contacto" class="control-label col-md-3">
                        Nombre <strong class="text-danger">*</strong>
                    </label>
                    <div class="col-md-8">
                        <input type="text" name="nombre_contacto" id="nombre_contacto" formControlName="nombre_contacto" class="form-control">
                    </div>
                    <div class="col-md-offset-3 col-md-8" *ngIf="formEditContacto.controls.nombre_contacto.errors && formEditContacto.controls.nombre_contacto.pristine && isSubmitContacto">
                        <strong class="help-block" *ngIf="formEditContacto.controls.nombre_contacto.errors.required">El nombre del contacto es requerido</strong>
                        <strong class="help-block" *ngIf="formEditContacto.controls.nombre_contacto.errors.maxlength">El nombre del contacto no debe poseer mas de 50 caracteres</strong>
                        <strong class="help-block" *ngIf="formEditContacto.controls.nombre_contacto.errors.sinEspacios">El nombre del contacto no debe poseer espacios en blanco al inicio del texto</strong>
                    </div>
                </div>

                <div class="form-group">
                    <label for="apellido_contacto" class="control-label col-md-3">
                        Apellido
                    </label>
                    <div class="col-md-8">
                        <input type="text" name="apellido_contacto" id="apellido_contacto" formControlName="apellido_contacto" class="form-control">
                    </div>
                </div>

                <div class="form-group">
                    <label for="religion_judia" class="control-label col-md-3">
                        ¿Religión judía? <strong class="text-danger">*</strong>
                    </label>
                    <div class="col-md-8">
                        <select name="religion_judia" id="religion_judia" formControlName="religion_judia" class="form-control">
                          <option value="0">No</option>
                          <option value="1">Si</option>
                        </select>
                    </div>
                </div>

                <div class="form-group" [ngClass]="{ 'has-error': formEditContacto.controls.medio_contacto.errors && formEditContacto.controls.medio_contacto.pristine && isSubmitContacto }">
                    <label for="medio_contacto" class="control-label col-md-3">
                        ¿Por qué medio es mejor contactarlo? <strong class="text-danger">*</strong>
                    </label>
                    <div class="col-md-8">
                        <textarea name="medio_contacto" id="medio_contacto" formControlName="medio_contacto" class="form-control" rows="4"></textarea>
                    </div>

                    <div class="col-md-offset-3 col-md-8" *ngIf="formEditContacto.controls.medio_contacto.errors && formEditContacto.controls.medio_contacto.pristine && isSubmitContacto">
                        <strong class="help-block" *ngIf="formEditContacto.controls.medio_contacto.errors.required">Los comentarios son requeridos</strong>
                        <strong class="help-block" *ngIf="formEditContacto.controls.medio_contacto.errors.sinEspacios">Los comentarios no deben poseer espacios en blanco al inicio del texto</strong>
                    </div>
                </div>

                <div class="form-group">
                    <label for="comentarios_contactos" class="control-label col-md-3">
                        Comentarios
                    </label>
                    <div class="col-md-8">
                        <textarea name="comentarios_contactos" id="comentarios_contactos" formControlName="comentarios_contactos" class="form-control" rows="4"></textarea>
                    </div>
                </div>

                <div class="form-group">
                    <label for="es_principal" class="control-label col-md-3">
                        ¿Es el contacto principal? <strong class="text-danger">*</strong>
                    </label>
                    <div class="col-md-8">
                        <select name="es_principal" id="es_principal" formControlName="es_principal" class="form-control">
                          <option value="0">No</option>
                          <option value="1">Si</option>
                        </select>
                    </div>
                </div>

                <hr>

                <div class="portlet box blue">
                    <div class="portlet-title">
                      <div class="caption">
                          Roles <strong class="text-danger">*</strong>
                      </div>
                    </div>
                    <div class="portlet-body">

                      <form  novalidate [formGroup]="formEditRolContacto" id="formEditRolContacto">

                        <div class="form-group" [ngClass]="{ 'has-error': formEditRolContacto.controls.rol_contacto.errors && formEditRolContacto.controls.rol_contacto.pristine && isSubmitRolContacto }">
                            <div class="col-md-10">
                                <select name="rol_contacto" id="rol_contacto" formControlName="rol_contacto" class="form-control" (change)="capturarRolContacto($event)">
                                  <option value="">Ninguno...</option>
                                  <option *ngFor="let rol of listRolesContacto" value="{{ rol.id }}">{{ rol.nombre }}</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                              <button (click)="addRolesModalEditContacto()" class="btn blue sbold" type="button" name="button" style="border:1px solid #fff"><i class="fa fa-plus" aria-hidden="true"></i></button>
                            </div>
                            <div class="col-md-12" *ngIf="formEditRolContacto.controls.rol_contacto.errors && formEditRolContacto.controls.rol_contacto.pristine && isSubmitRolContacto">
                                <strong class="help-block" *ngIf="formEditRolContacto.controls.rol_contacto.errors.required">El rol del contacto es requerido</strong>
                            </div>
                        </div>

                      </form>

                      <div class="table-responsive">
                        <table class="table table-striped table-bordered table-hover" >
                          <thead>
                            <tr>
                              <th>Roles</th>
                              <th>Acciones</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let rol of modelContacto[indexModalEdicionContacto]?.roles; let i=index">
                              <td><span class="label label-sm label-success"><strong>{{ rol.nombre_rol }}</strong></span></td>
                              <td>
                                <button (click)="deleteRolesModalEditContacto(i)" class="btn btn-danger sbold btn-sm" type="button" name="button">
                                    <i class="fa fa-trash" aria-hidden="true"></i>
                                </button>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>

                    </div>
                </div>

                <hr>

                <div class="row">

                  <div class="col-md-6">

                    <div class="portlet box blue">
                        <div class="portlet-title">
                          <div class="caption">
                              Emails <strong class="text-danger">*</strong>
                          </div>
                        </div>
                        <div class="portlet-body">

                          <form novalidate [formGroup]="formEditEmailContacto" id="formEditEmailContacto">
                            <div class="form-group" [ngClass]="{ 'has-error': formEditEmailContacto.controls.email_contacto.errors && formEditEmailContacto.controls.email_contacto.pristine && isSubmitEmailContacto }">
                                <div class="col-md-10">
                                  <input type="text" class="form-control" name="email_contacto" formControlName="email_contacto" id="email_contacto">
                                </div>
                                <div class="col-md-2">
                                  <button (click)="addEmailModalEditContacto()" class="btn blue sbold" type="button" name="button" style="border:1px solid #fff"><i class="fa fa-plus" aria-hidden="true"></i></button>
                                </div>
                                <div class="col-md-12" *ngIf="formEditEmailContacto.controls.email_contacto.errors && formEditEmailContacto.controls.email_contacto.pristine && isSubmitEmailContacto">
                                    <strong class="help-block" *ngIf="formEditEmailContacto.controls.email_contacto.errors.required">La descripción del email es requerida</strong>
                                    <strong class="help-block" *ngIf="formEditEmailContacto.controls.email_contacto.errors.pattern">El formato de email es incorrecto. Ej: nombre@mail.com</strong>
                                </div>
                            </div>

                          </form>

                          <div class="table-responsive">
                            <table class="table table-striped table-bordered table-hover" >
                              <thead>
                                <tr>
                                  <th>Email</th>
                                  <th>Acciones</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr *ngFor="let email of modelContacto[indexModalEdicionContacto]?.emails; let i=index">
                                  <td>{{ email.email }}</td>
                                  <td>
                                    <button (click)="deleteEmailModalEditContacto(i)" class="btn btn-danger sbold btn-sm" type="button" name="button">
                                        <i class="fa fa-trash" aria-hidden="true"></i>
                                    </button>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>

                        </div>
                    </div>

                </div>

                <div class="col-md-6">

                  <div class="portlet box blue">
                      <div class="portlet-title">
                        <div class="caption">
                            Teléfonos <strong class="text-danger">*</strong>
                        </div>
                      </div>
                      <div class="portlet-body">

                        <form novalidate [formGroup]="formEditTelefonoContacto" id="formEditTelefonoContacto">
                          <div class="form-group" [ngClass]="{ 'has-error': formEditTelefonoContacto.controls.tipo_telefono.errors && formEditTelefonoContacto.controls.tipo_telefono.pristine && isSubmitTelefonoContacto }">
                              <label for="tipo_telefono" class="control-label col-md-3">
                                Tipo <strong class="text-danger">*</strong>
                              </label>
                              <div class="col-md-8">
                                <select class="form-control" name="tipo_telefono" formControlName="tipo_telefono" formControlName="tipo_telefono" id="tipo_telefono" (change)="capturarTipoTelefono($event)">
                                  <option value="">Ninguno...</option>
                                  <option *ngFor="let tipo_telefono of listTiposTelefonos" value="{{ tipo_telefono.id }}">{{ tipo_telefono.nombre }}</option>
                                </select>
                              </div>

                              <div class="col-md-offset-3 col-md-8" *ngIf="formEditTelefonoContacto.controls.tipo_telefono.errors && formEditTelefonoContacto.controls.tipo_telefono.pristine && isSubmitTelefonoContacto">
                                  <strong class="help-block" *ngIf="formEditTelefonoContacto.controls.tipo_telefono.errors.required">El tipo de teléfono es requerido</strong>
                              </div>
                          </div>

                          <div class="form-group" [ngClass]="{ 'has-error': formEditTelefonoContacto.controls.telefono_contacto.errors && formEditTelefonoContacto.controls.telefono_contacto.pristine && isSubmitTelefonoContacto }">
                              <label for="telefono_contacto" class="control-label col-md-3">
                                Teléfono <strong class="text-danger">*</strong>
                              </label>
                              <div class="col-md-7">
                                <input type="text" class="form-control" [textMask]="{mask: onlyNumberMask}" name="telefono_contacto" formControlName="telefono_contacto" formControlName="telefono_contacto" id="telefono_contacto">
                              </div>
                              <div class="col-md-2">
                                <button (click)="addTelefonoModalEditContacto()" class="btn blue sbold" type="button" name="button" style="border:1px solid #fff"><i class="fa fa-plus" aria-hidden="true"></i></button>
                              </div>
                              <div class="col-md-offset-3 col-md-8" *ngIf="formEditTelefonoContacto.controls.telefono_contacto.errors && formEditTelefonoContacto.controls.telefono_contacto.pristine && isSubmitTelefonoContacto">
                                  <strong class="help-block" *ngIf="formEditTelefonoContacto.controls.telefono_contacto.errors.required">El teléfono es requerido</strong>
                              </div>
                          </div>
                        </form>

                        <table class="table table-striped table-bordered table-hover">
                          <thead>
                            <tr>
                              <th>Tipo</th>
                              <th>Teléfono</th>
                              <th>Acciones</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let telefono of modelContacto[indexModalEdicionContacto]?.telefonos; let i=index">
                              <td>{{ telefono.nombre_tipo_telefono }}</td>
                              <td>{{ telefono.telefono }}</td>
                              <td>
                                <button (click)="deleteTelefonoModalEditContacto(i)" class="btn btn-danger sbold btn-sm" type="button" name="button">
                                    <i class="fa fa-trash" aria-hidden="true"></i>
                                </button>
                              </td>
                            </tr>
                          </tbody>
                        </table>

                      </div>
                  </div>

                </div>

                </div>

              </div>

              <div class="modal-footer">
                  <button type="button" class="btn dark btn-outline" data-dismiss="modal" (click)="hideModalEditContacto()">Cerrar</button>
                  <button (click)="editContacto()" class="btn blue sbold">
                      Editar contacto
                  </button>
              </div>

          </form>

        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<!-- MODAL NUEVO SERVICIO -->
<div bsModal #modalCreateServicio="bs-modal" id="nuevo-servicio" class="modal fade" tabindex="-1" role="basic" aria-hidden="true" [config]="{backdrop: 'static', keyboard: false}">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">

            <form class="form-horizontal" novalidate [formGroup]="formCreateServicio" id="formCreateServicio">

                <div class="modal-header">

                    <h4 class="modal-title">Nuevo servicio</h4>

                </div>

                <div class="modal-body">

                  <div class="form-group" [ngClass]="{ 'has-error': formCreateServicio.controls.id_servicio.errors && formCreateServicio.controls.id_servicio.pristine && isSubmitServicio }">
                      <label for="id_servicio" class="control-label col-md-3">
                          Servicio <strong class="text-danger">*</strong>
                      </label>
                      <div class="col-md-8">
                          <select name="id_servicio" id="id_servicio" formControlName="id_servicio" class="form-control" (change)="capturarServicioContratadoCreate($event, formCreateServicio.value.id_servicio)">
                            <option value="">Ninguno...</option>
                            <option *ngFor="let serviciosContratado of listServiciosContratados" value="{{ serviciosContratado.id }}">{{ serviciosContratado.nombre }}</option>
                          </select>
                      </div>
                      <div class="col-md-offset-3 col-md-8" *ngIf="formCreateServicio.controls.id_servicio.errors && formCreateServicio.controls.id_servicio.pristine && isSubmitServicio">
                          <strong class="help-block" *ngIf="formCreateServicio.controls.id_servicio.errors.required">El servicio es requerido</strong>
                      </div>
                  </div>

                  <div *ngIf="servicioRecurrente" class="form-group" [ngClass]="{ 'has-error': formCreateServicio.controls.cantidad_mensual.errors && formCreateServicio.controls.cantidad_mensual.pristine && isSubmitServicio }">
                      <label for="cantidad_mensual" class="control-label col-md-3">
                          Cantidad mensual <strong class="text-danger">*</strong>
                      </label>
                      <div class="col-md-8">
                          <input class="form-control" [textMask]="{mask: onlyNumberMask}" type="text" name="cantidad_mensual" formControlName="cantidad_mensual" id="cantidad_mensual" maxlength="3">
                      </div>
                      <div class="col-md-offset-3 col-md-8" *ngIf="formCreateServicio.controls.cantidad_mensual.errors && formCreateServicio.controls.cantidad_mensual.pristine && isSubmitServicio">
                          <strong class="help-block" *ngIf="formCreateServicio.controls.cantidad_mensual.errors.required">La cantidad mensual es requerida</strong>
                      </div>
                  </div>

                </div>

                <div class="modal-footer">
                    <button type="button" class="btn dark btn-outline" data-dismiss="modal" (click)="hideModalCreateServicio()">Cerrar</button>
                    <button (click)="createServicio()" class="btn green sbold">
                        Guardar servicio
                    </button>
                </div>

            </form>

        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<!-- MODAL EDITAR SERVICIO -->
<div bsModal #modalEditServicio="bs-modal" id="editar-servicio" class="modal fade" tabindex="-1" role="basic" aria-hidden="true" [config]="{backdrop: 'static', keyboard: false}">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">

            <form *ngIf="formEditServicio" class="form-horizontal" novalidate [formGroup]="formEditServicio" id="formEditServicio">

                <div class="modal-header">

                    <h4 class="modal-title">Editar servicio</h4>

                </div>

                <div class="modal-body">

                  <div class="form-group" [ngClass]="{ 'has-error': formEditServicio.controls.id_servicio.errors && formEditServicio.controls.id_servicio.pristine && isSubmitServicio }">
                      <label for="id_servicio" class="control-label col-md-3">
                          Servicio <strong class="text-danger">*</strong>
                      </label>
                      <div class="col-md-8">
                          <select name="id_servicio" id="id_servicio" formControlName="id_servicio" class="form-control" (change)="capturarServicioContratadoEdit($event, formEditServicio.value.id_servicio)">
                            <option value="">Ninguno...</option>
                            <option *ngFor="let serviciosContratado of listServiciosContratados" value="{{ serviciosContratado.id }}">{{ serviciosContratado.nombre }}</option>
                          </select>
                      </div>
                      <div class="col-md-offset-3 col-md-8" *ngIf="formEditServicio.controls.id_servicio.errors && formEditServicio.controls.id_servicio.pristine && isSubmitServicio">
                          <strong class="help-block" *ngIf="formEditServicio.controls.id_servicio.errors.required">El servicio es requerido</strong>
                      </div>
                  </div>

                  <div *ngIf="servicioRecurrenteEdit" class="form-group" [ngClass]="{ 'has-error': formEditServicio.controls.cantidad_mensual.errors && formEditServicio.controls.cantidad_mensual.pristine && isSubmitServicio }">
                      <label for="cantidad_mensual" class="control-label col-md-3">
                          Cantidad mensual <strong class="text-danger">*</strong>
                      </label>
                      <div class="col-md-8">
                          <input class="form-control" [textMask]="{mask: onlyNumberMask}" type="text" name="cantidad_mensual" formControlName="cantidad_mensual" id="cantidad_mensual" maxlength="3">
                      </div>
                      <div class="col-md-offset-3 col-md-8" *ngIf="formEditServicio.controls.cantidad_mensual.errors && formEditServicio.controls.cantidad_mensual.pristine && isSubmitServicio">
                          <strong class="help-block" *ngIf="formEditServicio.controls.cantidad_mensual.errors.required">La cantidad mensual es requerida</strong>
                      </div>
                  </div>

                </div>

                <div class="modal-footer">
                    <button type="button" class="btn dark btn-outline" data-dismiss="modal" (click)="hideModalEditServicio()">Cerrar</button>
                    <button (click)="editServicio()" class="btn green sbold">
                        Editar servicio
                    </button>
                </div>

            </form>

        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<!-- MODAL ELIMINAR CONTACTO -->
<div class="modal fade" id="eliminar-contacto" tabindex="-1" role="basic" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="modal-header">

                <h4 class="modal-title">Eliminar Contacto</h4>

            </div>

            <div class="modal-body" *ngIf="deleteDataContacto">
                <h2>Desea eliminar el contacto <strong>{{ deleteDataContacto.nombre }} {{ deleteDataContacto.apellido }}</strong>?</h2>
            </div>

            <div class="modal-footer">
                <form>
                    <button type="button" class="btn dark btn-outline" data-dismiss="modal">Cerrar</button>
                    <button class="btn btn-danger sbold" [disabled]="loader" (click)="deleteContactoCliente()">
                        Eliminar contacto
                        <img *ngIf="loader" src="assets/img/loader.gif" class="gif-loader">
                    </button>
                </form>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<!-- MODAL ELIMINAR SERVICIO -->
<div class="modal fade" id="eliminar-servicio" tabindex="-1" role="basic" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="modal-header">

                <h4 class="modal-title">Eliminar Servicio contratado</h4>

            </div>

            <div class="modal-body" *ngIf="deleteDataServicio">
                <h2>Desea eliminar el servicio contratado <strong>{{ deleteDataServicio.nombre_servicio }}</strong>?</h2>
            </div>

            <div class="modal-footer">
                <form>
                    <button type="button" class="btn dark btn-outline" data-dismiss="modal">Cerrar</button>
                    <button class="btn btn-danger sbold" [disabled]="loader" (click)="deleteServicioCliente()">
                        Eliminar servicio contratado
                        <img *ngIf="loader" src="assets/img/loader.gif" class="gif-loader">
                    </button>
                </form>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
