<div class="login">

    <div class="content">

        <h3 class="form-title font-green">Inicio de sesión</h3>

        <form  #fLogin="ngForm" novalidate [formGroup]="formLogin">

            <div class="form-group" [ngClass]="{ 'has-error': formLogin.controls.email_laboral.errors && formLogin.controls.email_laboral.pristine && fLogin.submitted }">
                <label class="control-label" for="email_laboral">Correo electrónico laboral:</label>
                <input type="text" class="form-control" name="email_laboral" id="email_laboral" formControlName="email_laboral" placeholder="Correo electrónico laboral">
                <div *ngIf="formLogin.controls.email_laboral.errors && formLogin.controls.email_laboral.pristine && fLogin.submitted">
                    <strong class="help-block" *ngIf="formLogin.controls.email_laboral.errors.required && formLogin.controls.email_laboral.pristine && fLogin.submitted">El correo electrónico laboral es requerido</strong>
                    <strong class="help-block" *ngIf="formLogin.controls.email_laboral.errors.pattern && formLogin.controls.email_laboral.pristine && fLogin.submitted">Formato de correo electrónico laboral inválido (ej: name@mail.com)</strong>
                </div>
            </div>

            <div class="form-group" [ngClass]="{ 'has-error': formLogin.controls.password.errors && formLogin.controls.password.pristine && fLogin.submitted }">
                <label class="control-label" for="password">Contraseña:</label>
                <input type="password" class="form-control" name="password" id="password"  formControlName="password" placeholder="Contraseña">
                <div *ngIf="formLogin.controls.password.errors && formLogin.controls.password.pristine && fLogin.submitted">
                    <strong class="help-block" *ngIf="formLogin.controls.password.errors.required && formLogin.controls.email_laboral.pristine && fLogin.submitted">La contraseña es requerida</strong>
                </div>
            </div>

            <div class="form-group">
                <button type="submit" [disabled]="loader" class="btn green" (click)="login()">
                    <strong>Entrar</strong>
                    <img *ngIf="loader" src="assets/img/loader.gif" class="gif-loader">
                </button>
            </div>

            <div class="create-account">
                <p>
                    <a (click)="showModal()" class="uppercase">Cambiar contraseña</a>
                </p>
            </div>

        </form>

    </div>

</div>

<!-- MODAL NUEVA TAREA  -->
<div bsModal #modalEmail="bs-modal" class="modal fade" tabindex="-1" role="basic" aria-hidden="true" [config]="{backdrop: 'static', keyboard: false}">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">

            <form class="form-horizontal" novalidate [formGroup]="formEmail">

                <div class="modal-header">

                    <h4 class="modal-title">Cambiar contraseña</h4>

                </div>

                <div class="modal-body">

                    <div class="form-group" [ngClass]="{ 'has-error': formEmail.controls.email_laboral.errors && formEmail.controls.email_laboral.pristine && isSubmitEmail }">
                        <label for="es_critica" class="control-label col-md-3">
                            Email laboral <strong class="text-danger">*</strong>
                        </label>
                        <div class="col-md-8">
                            <input type="email_laboral" class="form-control" name="email_laboral" id="email_laboral" formControlName="email_laboral">
                        </div>
                        <div class="col-md-offset-3 col-md-8" *ngIf="formEmail.controls.email_laboral.errors && formEmail.controls.email_laboral.pristine && isSubmitEmail">
                            <strong class="help-block" *ngIf="formEmail.controls.email_laboral.errors.required && formEmail.controls.email_laboral.pristine">El correo electrónico laboral es requerido</strong>
                            <strong class="help-block" *ngIf="formEmail.controls.email_laboral.errors.pattern && formEmail.controls.email_laboral.pristine">Formato de correo electrónico laboral inválido (ej: name@mail.com)</strong>
                        </div>
                    </div>

                </div>

                <div class="modal-footer">
                    <button type="button" class="btn dark btn-outline" data-dismiss="modal" (click)="hideModal()">Cerrar</button>
                    <button class="btn blue sbold" [disabled]="loader" (click)="enviarEmail()">
                        Enviar email
                        <img *ngIf="loader" src="assets/img/loader.gif" class="gif-loader">
                    </button>
                </div>

            </form>

        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
